<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notes</title>
<link rel="stylesheet" href="style.css">
<style>
  body { font-family: sans-serif; margin:0; background:#f5f7fa; }
  header { padding:1rem; background:#4f46e5; color:white; text-align:center; }
  nav { display:flex; gap:1rem; background:#e0e7ff; padding:0.5rem 1rem; }
  nav a { text-decoration:none; color:#111; font-weight:600; }
  main { padding:1rem; max-width:900px; margin:auto; }

  /* Create form */
  .noteForm { background:#fff; padding:1rem; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,0.1); margin-bottom:1.5rem; }
  .noteForm input, .noteForm textarea, .noteForm select { width:100%; margin-bottom:0.5rem; padding:0.5rem; border-radius:6px; border:1px solid #ccc; font-size:1rem; }
  .toolbar { display:flex; gap:0.5rem; margin-bottom:0.5rem; }
  .toolbar button { padding:0.3rem 0.6rem; border:none; border-radius:6px; background:#e0e7ff; cursor:pointer; font-size:0.9rem; }
  .toolbar button:hover { background:#c7d2fe; }

  /* Notes grid */
  #notesContainer { display:grid; grid-template-columns:repeat(auto-fill, minmax(220px, 1fr)); gap:1rem; }
  .noteCard { background:#fff; padding:1rem; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,0.1); position:relative; display:flex; flex-direction:column; gap:0.5rem; }
  .noteCard h3 { margin:0; font-size:1.1rem; font-weight:bold; }
  .noteCard .category { font-size:0.8rem; padding:0.2rem 0.5rem; border-radius:6px; background:#ddd; display:inline-block; margin-bottom:0.5rem; }
  .noteCard .actions { position:absolute; top:8px; right:8px; display:flex; gap:6px; }
  .noteCard .actions button { border:none; background:#f3f4f6; border-radius:6px; padding:0.2rem 0.5rem; cursor:pointer; font-size:0.8rem; }
  .noteCard .actions button:hover { background:#e5e7eb; }
  .pinned { border:2px solid #f59e0b; }

  /* Search */
  #searchBar { width:100%; padding:0.6rem; margin-bottom:1rem; border-radius:8px; border:1px solid #ccc; }
</style>
</head>
<body>
<header>
  <h1>Notes</h1>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="notes.html">Notes</a>
  <a href="tasks.html">Tasks</a>
</nav>

<main>
  <!-- Search -->
  <input type="text" id="searchBar" placeholder="Search notes...">

  <!-- Create Note -->
  <div class="noteForm">
    <input type="text" id="noteTitle" placeholder="Title...">
    <div class="toolbar">
      <button onclick="formatText('bold')"><b>B</b></button>
      <button onclick="formatText('italic')"><i>I</i></button>
      <button onclick="formatText('underline')"><u>U</u></button>
      <button onclick="insertBullet()">‚Ä¢ List</button>
    </div>
    <textarea id="noteInput" placeholder="Write your note here..."></textarea>
    <select id="noteCategory">
      <option value="General">General</option>
      <option value="Frontend">Frontend</option>
      <option value="Backend">Backend</option>
      <option value="Ideas">Ideas</option>
      <option value="Other">Other</option>
    </select>
    <button onclick="saveNote()">Save Note</button>
  </div>

  <!-- Notes Container -->
  <div id="notesContainer"></div>
</main>

<script>
let notes = JSON.parse(localStorage.getItem('notesApp')) || [];

// Save note
function saveNote() {
  const title = document.getElementById('noteTitle').value.trim();
  const text = document.getElementById('noteInput').value.trim();
  const category = document.getElementById('noteCategory').value;
  if (!title && !text) return;

  notes.push({ title, text, category, pinned:false, date: Date.now() });
  localStorage.setItem('notesApp', JSON.stringify(notes));

  document.getElementById('noteTitle').value = '';
  document.getElementById('noteInput').value = '';
  renderNotes();
}

// Render notes
function renderNotes(filter='') {
  const container = document.getElementById('notesContainer');
  container.innerHTML = '';

  // sort pinned on top
  let displayNotes = [...notes].sort((a,b)=> b.pinned - a.pinned || b.date - a.date);

  // filter
  if (filter) {
    displayNotes = displayNotes.filter(n => 
      n.title.toLowerCase().includes(filter) || 
      n.text.toLowerCase().includes(filter)
    );
  }

  displayNotes.forEach((note, index) => {
    const card = document.createElement('div');
    card.className = 'noteCard' + (note.pinned ? ' pinned':'');
    card.innerHTML = `
      <div class="actions">
        <button onclick="togglePin(${index})">üìå</button>
        <button onclick="editNote(${index})">‚úèÔ∏è</button>
        <button onclick="deleteNote(${index})">üóë</button>
      </div>
      <h3>${note.title || '(Untitled)'}</h3>
      <div class="category">${note.category}</div>
      <div>${note.text.replace(/\n/g,'<br>')}</div>
    `;
    container.appendChild(card);
  });
}

// Edit note
function editNote(index) {
  const note = notes[index];
  const newTitle = prompt('Edit title:', note.title);
  const newText = prompt('Edit note:', note.text);
  if (newText !== null) {
    notes[index].title = newTitle;
    notes[index].text = newText;
    localStorage.setItem('notesApp', JSON.stringify(notes));
    renderNotes();
  }
}

// Delete note
function deleteNote(index) {
  if (confirm('Delete this note?')) {
    notes.splice(index,1);
    localStorage.setItem('notesApp', JSON.stringify(notes));
    renderNotes();
  }
}

// Pin toggle
function togglePin(index) {
  notes[index].pinned = !notes[index].pinned;
  localStorage.setItem('notesApp', JSON.stringify(notes));
  renderNotes();
}

// Toolbar functions
function formatText(command) {
  const textarea = document.getElementById('noteInput');
  const start = textarea.selectionStart;
  const end = textarea.selectionEnd;
  let text = textarea.value;
  let selected = text.substring(start,end);
  let wrapped = selected;

  if(command==='bold') wrapped = `**${selected}**`;
  if(command==='italic') wrapped = `*${selected}*`;
  if(command==='underline') wrapped = `__${selected}__`;

  textarea.value = text.substring(0,start) + wrapped + text.substring(end);
}
function insertBullet() {
  const textarea = document.getElementById('noteInput');
  const start = textarea.selectionStart;
  const text = textarea.value;
  textarea.value = text.substring(0,start) + "‚Ä¢ " + text.substring(start);
}

// Search
document.getElementById('searchBar').addEventListener('input', e => {
  renderNotes(e.target.value.toLowerCase());
});

// Init
renderNotes();
</script>
</body>
</html>
